(this.webpackJsonppaintv2=this.webpackJsonppaintv2||[]).push([[0],{166:function(e,t,n){e.exports=n(346)},171:function(e,t,n){},346:function(e,t,n){"use strict";n.r(t);var a=n(42),i=n(0),c=n.n(i),r=n(12),s=n.n(r),o=(n(171),n(389)),u=n(391),l=n(380),h=n(385),d=n(7),p=n(9),f=function(){function e(){var t=this;Object(d.a)(this,e),this._itemArray=[],this._selectedItemsUuids=[],this.add=function(e){t._itemArray=t._itemArray.concat(e)},this.remove=function(e){return t._itemArray.splice(t._itemArray.indexOf(t.get(e)),1)},this.get=function(e){return t._itemArray.find((function(t){return t.getObjectData().id===e}))}}return Object(p.a)(e,[{key:"itemArray",get:function(){return this._itemArray},set:function(e){this._itemArray=e}},{key:"selectedItemsUuids",get:function(){return this._selectedItemsUuids},set:function(e){this._selectedItemsUuids=e}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();f._instance=void 0;var g=n(348),v=n(146),y=n.n(v),m=n(145),b=n.n(m),_=function(){function e(){var t=this;Object(d.a)(this,e),this._commandArray=[],this._undoneCommands=[],this._isRedo=!1,this.push=function(e){e.execute()&&(t._commandArray.push(e),t._isRedo||(t._undoneCommands.length=0,t._isRedo=!1))},this.undo=function(){var e=t._commandArray.pop();null!=e&&(e.undo(),t._undoneCommands.push(e))},this.redo=function(){t._undoneCommands.length>0&&(t._isRedo=!0,t.push(t._undoneCommands.pop()))}}return Object(p.a)(e,[{key:"commandArray",get:function(){return this._commandArray},set:function(e){this._commandArray=e}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();function x(e){var t=e.shapeUpdate,n=_.getInstance();function a(){t()}return c.a.createElement(l.a,{item:!0},c.a.createElement(g.a,{size:"large",variant:"outlined",startIcon:c.a.createElement(b.a,null),onClick:function(){n.undo(),a()}},"Undo"),c.a.createElement(g.a,{size:"large",variant:"outlined",startIcon:c.a.createElement(y.a,null),onClick:function(){n.redo(),a()}},"Redo"))}_._instance=void 0;var w=n(148),k=n.n(w),O=n(149),j=n.n(O),E=n(147),I=n.n(E),C=n(150),D=n.n(C),S=n(384),A=n(392),P=n(20),U=n(19),z=function(){function e(t,n){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(p.a)(e,[{key:"toString",value:function(){return"Vector2(".concat(this.x,", ").concat(this.y,")")}}]),e}(),B=function e(t,n){var a=this;Object(d.a)(this,e),this._items=f.getInstance(),this._shape=void 0,this._oldPos=void 0,this._newPos=void 0,this.execute=function(){return a._shape.updatePosition(a._newPos),!0},this.undo=function(){a._shape.updatePosition(a._oldPos)},this._shape=this._items.get(t),this._oldPos=new z(-1*n.x,-1*n.y),this._newPos=new z(n.x,n.y)},G=n(30);function T(){var e=f.getInstance(),t=[],n=0;return G.selectAll(".selected").each((function(){var e=G.select(this);t.push(e.node().id),n++})),e.selectedItemsUuids=t,n}var M=function(){function e(t,n,a,i){Object(d.a)(this,e),this.x=void 0,this.cx=void 0,this.y=void 0,this.cy=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this.x=a,this.cx=a+(i-a)/2,this.y=t,this.cy=t+(n-t)/2,this.top=t,this.bottom=n,this.left=a,this.right=i,this.height=n-t,this.width=i-a}return Object(p.a)(e,[{key:"updatePosition",value:function(e){this.cx+=e.x,this.cy+=e.y,this.x+=e.x,this.y+=e.y,this.left+=e.x,this.top+=e.y,this.right+=e.x,this.bottom+=e.y}}]),e}(),R=n(30),N=function e(t,n){var a=this;Object(d.a)(this,e),this._items=f.getInstance(),this._shape=void 0,this._newData=void 0,this._oldData=void 0,this._oldScale=void 0,this._newScale=void 0,this.scale=function(e,t){return 1/e*t},this.execute=function(){return a._shape.updateSize(a._newScale,a._newData),!0},this.undo=function(){a._shape.updateSize(a._oldScale,a._oldData),console.log(a._oldScale,a._oldData)};var i=R.select('[id="'.concat(t,'"]')).node().getBBox();this._shape=this._items.get(t),this._oldData=new M(n.y,n.y+n.height,n.x,n.x+n.width),this._newData=new M(i.y,i.y+i.height,i.x,i.x+i.width),this._oldScale=new z(this.scale(this._newData.width,this._oldData.width),this.scale(this._newData.height,this._oldData.height)),this._newScale=new z(this.scale(this._oldData.width,this._newData.width),this.scale(this._oldData.height,this._newData.height))},V=n(30);function q(e){var t=V.select("#canvas"),n=_.getInstance(),a=f.getInstance(),i=V.select(".selected").node().getBBox(),c=!0,r=V.drag().on("drag",(function(){g=w(p-d,p-V.event.x),v=w(h-l,h-V.event.y),d=V.event.x,l=V.event.y,k()})).on("end",E),s=V.drag().on("drag",(function(){g=w(p-d,V.event.x-d),v=w(h-l,h-V.event.y),p=V.event.x,l=V.event.y,k()})).on("end",E),o=V.drag().on("drag",(function(){g=w(p-d,p-V.event.x),v=w(h-l,V.event.y-l),d=V.event.x,h=V.event.y,k()})).on("end",E),u=V.drag().on("drag",(function(){g=w(p-d,V.event.x-d),v=w(h-l,V.event.y-l),p=V.event.x,h=V.event.y,k()})).on("end",E),l=i.height<0?i.y+i.height:i.y,h=i.height<0?i.y:i.y+i.height,d=i.width<0?i.x+i.width:i.x,p=i.width<0?i.x:i.x+i.width,g=1,v=1,y=t.append("circle").attr("class","resizePoint").attr("cx",d).attr("cy",l).attr("transform","translate(-".concat(7,", -").concat(7,")")).attr("r",5).call(r),m=t.append("circle").attr("class","resizePoint").attr("cx",p).attr("cy",l).attr("transform","translate(".concat(7,", -").concat(7,")")).attr("r",5).call(s),b=t.append("circle").attr("class","resizePoint").attr("cx",d).attr("cy",h).attr("transform","translate(-".concat(7,", ").concat(7,")")).attr("r",5).call(o),x=t.append("circle").attr("class","resizePoint").attr("cx",p).attr("cy",h).attr("transform","translate(".concat(7,", ").concat(7,")")).attr("r",5).call(u);function w(e,t){return 1/e*t}function k(){y.attr("cx",d).attr("cy",l),m.attr("cx",p).attr("cy",l),b.attr("cx",d).attr("cy",h),x.attr("cx",p).attr("cy",h),c&&(V.selectAll("#canvas > g").each((function(){var e=V.select(this).node(),t=e.getBBox(),n=a.get(e.id),i=new M(t.y,t.y+t.height,t.x,t.x+t.width);n.updateBBox(i)})),c=!1),O(V.select(".selected"),new M(l,h,d,p))}function O(e,t){switch(e.node().tagName){case"ellipse":j(e,t);break;case"rect":!function(e,t){e.attr("width",t.width).attr("height",t.height).attr("x",t.left).attr("y",t.top)}(e,t);break;case"polygon":!function(e,t){e.attr("points","".concat(t.left,",").concat(t.bottom," ").concat(t.right,",").concat(t.bottom," ").concat(t.cx,",").concat(t.top)).attr("cx",t.cx).attr("cy",t.cy)}(e,t);break;case"g":!function(e,t){var n=e.node().getBBox();V.selectAll('[id="'.concat(e.node().id,'"] > *')).each((function(){var e=V.select(this),a=e.node().getBBox();O(e,new M((a.y-n.y)*v+t.top,(a.y+a.height-(n.y+n.height))*v+t.bottom,(a.x-n.x)*g+t.left,(a.x+a.width-(n.x+n.width))*g+t.right))}))}(e,t);break;default:j(e,t)}}function j(e,t){e.attr("rx",t.width/2).attr("ry",t.height/2).attr("cx",t.cx).attr("cy",t.cy)}function E(){n.push(new N(V.select(".selected").node().id,i)),e(),c=!0}}var F=n(30);function L(e,t){var n=Object(r.findDOMNode)(e),a=_.getInstance(),i=new z(0,0);F.drag().subject((function(){return i})).on("start",(function(){F.selectAll(".selected").classed("selected",!1),F.selectAll(".resizePoint").remove(),F.select("#contextMenu").style("display","none"),F.select(this).raise().classed("selected",!0)})).on("drag",(function(){var e="translate(".concat(F.event.x,", ").concat(F.event.y,")");i.x=F.event.x,i.y=F.event.y,F.select(this).attr("transform",e)})).on("end",(function(){(i.x>=1||i.x<=-1||i.y>=1||i.y<=-1)&&a.push(new B(n.id,i)),F.select(this).attr("transform",null),t(),1===T()&&q(t)}))(F.select(n)),F.select(n).on("click",(function(){F.event.stopPropagation()})).on("contextmenu",(function(){if(F.select(this).classed("selected")){var e=F.mouse(this);F.select("#contextMenu").style("position","absolute").style("display","block").style("left",e[0]+"px").style("top",e[1]+"px"),F.event.preventDefault()}}))}var J=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.enableDragging(this.props.ingroup)}},{key:"componentDidUpdate",value:function(e,t,n){this.enableDragging(this.props.ingroup)}},{key:"enableDragging",value:function(e){e||L(this,this.props.update)}},{key:"render",value:function(){return c.a.createElement("rect",this.props)}}]),n}(c.a.Component),H=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"draw",value:function(e,t,n,a,i){var r=(t.width+t.height)/2;return c.a.createElement(J,{key:e,id:e,x:t.x,y:t.y,width:r,height:r,style:n,ingroup:a,update:i})}},{key:"getType",value:function(){return"Square"}}]),e}(),W=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.enableDragging(this.props.ingroup)}},{key:"componentDidUpdate",value:function(e,t,n){this.enableDragging(this.props.ingroup)}},{key:"enableDragging",value:function(e){e||L(this,this.props.update)}},{key:"render",value:function(){return c.a.createElement("polygon",this.props)}}]),n}(c.a.Component),X=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"draw",value:function(e,t,n,a,i){var r=[[t.left,t.bottom],[t.right,t.bottom],[t.cx,t.top]];return c.a.createElement(W,{key:e,id:e,points:r.toString(),cx:t.cx,cy:t.cy,width:t.width,height:t.height,style:n,ingroup:a,update:i})}},{key:"getType",value:function(){return"Triangle"}}]),e}(),Y=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.enableDragging(this.props.ingroup)}},{key:"componentDidUpdate",value:function(e,t,n){this.enableDragging(this.props.ingroup)}},{key:"enableDragging",value:function(e){e||L(this,this.props.update)}},{key:"render",value:function(){return c.a.createElement("ellipse",this.props)}}]),n}(c.a.Component),K=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"draw",value:function(e,t,n,a,i){var r=(t.width+t.height)/4;return c.a.createElement(Y,{key:e,id:e,cx:t.cx,cy:t.cy,rx:r,ry:r,style:n,ingroup:a,update:i})}},{key:"getType",value:function(){return"Circle"}}]),e}(),Q=function e(){Object(d.a)(this,e)};Q.type=new K,Q.height=50,Q.width=50,Q.context="",Q.styling={stroke:"black",fill:"#cccccc"};var Z=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"draw",value:function(e,t,n,a,i){return c.a.createElement(J,{key:e,id:e,x:t.x,y:t.y,width:t.width,height:t.height,style:n,ingroup:a,update:i})}},{key:"getType",value:function(){return"Rectangle"}}]),e}();function $(){var e=c.a.useState("circle"),t=Object(a.a)(e,2),n=t[0],i=t[1];return c.a.createElement(l.a,{item:!0},c.a.createElement(A.a,{value:n,exclusive:!0,onChange:function(e,t){switch(i(t),t){case"circle":Q.type=new K;break;case"square":Q.type=new H;break;case"rectangle":Q.type=new Z;break;case"triangle":Q.type=new X;break;default:Q.type=new K}},"aria-label":"text alignment"},c.a.createElement(S.a,{value:"circle"},c.a.createElement(I.a,null)),c.a.createElement(S.a,{value:"square"},c.a.createElement(k.a,null)),c.a.createElement(S.a,{value:"rectangle"},c.a.createElement(j.a,null)),c.a.createElement(S.a,{value:"triangle"},c.a.createElement(D.a,null))))}var ee=n(390);function te(){var e=c.a.useState("50"),t=Object(a.a)(e,2),n=t[0],i=t[1],r=c.a.useState("50"),s=Object(a.a)(r,2),o=s[0],u=s[1];return c.a.createElement(l.a,{item:!0},c.a.createElement("form",{noValidate:!0,autoComplete:"off"},c.a.createElement(ee.a,{id:"width-input",type:"number",label:"Width",variant:"outlined",size:"small",value:o,onChange:function(e){u(e.target.value),Q.width=parseInt(e.target.value)}})),c.a.createElement("form",{noValidate:!0,autoComplete:"off"},c.a.createElement(ee.a,{id:"height-input",type:"number",label:"Height",variant:"outlined",size:"small",value:n,onChange:function(e){i(e.target.value),Q.height=parseInt(e.target.value)}})))}var ne=n(151),ae=n(386),ie=n(41),ce=n(158),re=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"draw",value:function(e,t,a,i,c){var r=Q.styling;return Object(ce.a)(Object(ie.a)(n.prototype),"draw",this).call(this,e,t,r,i,c)}}]),n}(function(){function e(t){Object(d.a)(this,e),this._shape=void 0,this._shape=t}return Object(p.a)(e,[{key:"draw",value:function(e,t,n,a,i){return this._shape.draw(e,t,n,a,i)}},{key:"getType",value:function(){return this._shape.getType()}}]),e}()),se=n(30),oe=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i)))._itemsInstance=f.getInstance(),e._update=e.props.shapeUpdate,e.state={background:"#cccccc",displayColorPicker:!1},e.handleChangeComplete=function(t){e.setState({background:t.hex}),Q.styling={fill:t.hex,stroke:"black"}},e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){if(e.setState({displayColorPicker:!1}),1===T()){var t=se.select(".selected").node().id,n=e._itemsInstance.get(t);n.changeStrategy(new re(n.getObjectData().strategy)),e._update()}},e}return Object(p.a)(n,[{key:"render",value:function(){var e={popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}};return c.a.createElement(l.a,{item:!0},c.a.createElement(ae.a,null,c.a.createElement(g.a,{size:"large",onClick:this.handleClick},"Background color")),this.state.displayColorPicker?c.a.createElement("div",{style:e.popover},c.a.createElement("div",{style:e.cover,onClick:this.handleClose}),c.a.createElement(ne.SketchPicker,{color:this.state.background,onChangeComplete:this.handleChangeComplete})):null)}}]),n}(c.a.Component),ue=n(94),le=n(95),he=n.n(le),de=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"draw",value:function(e,t,n,a,i){return c.a.createElement(Y,{key:e,id:e,cx:t.cx,cy:t.cy,rx:t.width/2,ry:t.height/2,style:n,ingroup:a,update:i})}},{key:"getType",value:function(){return"Elliptic"}}]),e}(),pe=n(140),fe=function(){function e(t,n,a,i,c,r){var s=this;Object(d.a)(this,e),this._uuid=null,this._strategy=void 0,this._bbox=void 0,this._styling=void 0,this.draw=function(e,t){return s._strategy.draw(s._uuid,s._bbox,s._styling,e,t)},this.updatePosition=function(e){s._bbox.updatePosition(e)},this._strategy=t,this._styling=r,this._uuid=pe(),this._bbox=new M(a-c/2,a+c/2,n-i/2,n+i/2)}return Object(p.a)(e,[{key:"changeStrategy",value:function(e){this._strategy=e}},{key:"updateSize",value:function(e,t){this._bbox=t,"Circle"===this._strategy.getType()&&this.changeStrategy(new de),"Square"===this._strategy.getType()&&this.changeStrategy(new Z)}},{key:"getObjectData",value:function(){return{id:this._uuid,bbox:this._bbox,style:this._styling,strategy:this._strategy}}},{key:"acceptVisitor",value:function(e){e.visitShape(this)}}]),e}(),ge=n(51),ve=n(75),ye=n(152),me=function(){function e(){Object(d.a)(this,e),this.currentGroup=new ve.b}return Object(p.a)(e,[{key:"visitGroup",value:function(t){var n=t.getObjectData(),a=new e;n.items.forEach((function(e){e.acceptVisitor(a)})),this.currentGroup.items.push(new ve.a("Group",a.buildTree()))}},{key:"visitShape",value:function(e){var t=e.getObjectData(),n=new ve.a(t.strategy.getType(),Object(ye.sprintf)("%f, %f, %f, %f",t.bbox.cx,t.bbox.cy,t.bbox.width,t.bbox.height));this.currentGroup.items.push(n)}},{key:"buildTree",value:function(){return this.currentGroup}}]),e}(),be=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.enableDragging(this.props.ingroup)}},{key:"componentDidUpdate",value:function(e,t,n){this.enableDragging(this.props.ingroup)}},{key:"enableDragging",value:function(e){e||L(this,this.props.update)}},{key:"render",value:function(){return c.a.createElement("g",this.props,this.props.children)}}]),n}(c.a.Component),_e=n(140),xe=function(){function e(t){var n=this;Object(d.a)(this,e),this._uuid=void 0,this._bbox=new M(0,0,0,0),this._items=[],this._itemInstance=f.getInstance(),this.draw=function(e,t){return c.a.createElement(be,{key:n._uuid,id:n._uuid,ingroup:e,update:t},n._items.map((function(e){return e.draw(!0,t)})))},this._uuid=_e(),this.add(t)}return Object(p.a)(e,[{key:"updatePosition",value:function(e){this._bbox.updatePosition(e),this._items.forEach((function(t){t.updatePosition(e)}))}},{key:"updateSize",value:function(e,t){var n=this;this._items.forEach((function(a){var i=a.getObjectData().bbox,c=new M((i.top-n._bbox.top)*e.y+t.top,(i.bottom-n._bbox.bottom)*e.y+t.bottom,(i.left-n._bbox.left)*e.x+t.left,(i.right-n._bbox.right)*e.x+t.right);a.updateSize(e,c)})),this._bbox=t}},{key:"updateBBox",value:function(e){this._bbox=e}},{key:"add",value:function(e){var t=this;e.forEach((function(e){t._items.push(t._itemInstance.remove(e)[0])}))}},{key:"remove",value:function(){this._itemInstance.add(this._items),this._itemInstance.remove(this._uuid)}},{key:"acceptVisitor",value:function(e){e.visitGroup(this)}},{key:"getObjectData",value:function(){return{id:this._uuid,items:this._items,bbox:this._bbox}}}]),e}(),we={stroke:"black",fill:"#cccccc"},ke=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"Load",value:function(){var e=localStorage.getItem("Draw");if(null!=e){var t=he.a.parse(e);f.getInstance().itemArray.length=0;var n,a=Object(ue.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.Group?f.getInstance().itemArray.push(this.CreateGroup(i)):f.getInstance().itemArray.push(this.CreateShape(i))}}catch(c){a.e(c)}finally{a.f()}}}},{key:"CreateGroup",value:function(e){var t,n=[],a=Object(ue.a)(e.Group);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.Group?n.push(this.CreateGroup(i)):n.push(this.CreateShape(i))}}catch(l){a.e(l)}finally{a.f()}for(var c=[],r=0,s=n;r<s.length;r++){var o=s[r];f.getInstance().itemArray.push(o),c.push(o.getObjectData().id)}var u=new xe(c);return console.log(c),u}},{key:"CreateShape",value:function(e){var t,n;if(console.log(e),e.Circle)n=new K,t=ge(e.Circle,"%f, %f, %f, %f");else if(e.Elliptic)n=new de,t=ge(e.Elliptic,"%f, %f, %f, %f");else if(e.Square)n=new H,t=ge(e.Square,"%f, %f, %f, %f");else if(e.Rectangle)n=new Z,t=ge(e.Rectangle,"%f, %f, %f, %f");else{if(!e.Triangle)throw new Error("Unknown type: ".concat(e));n=new X,t=ge(e.Triangle,"%f, %f, %f, %f")}return new fe(n,t[0],t[1],t[2],t[3],we)}},{key:"Save",value:function(){var e=new he.a.Document,t=new me;f.getInstance().itemArray.forEach((function(e){e.acceptVisitor(t)})),console.log(t.buildTree()),e.contents=t.buildTree(),console.log(),localStorage.setItem("Draw",String(e))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();ke._instance=void 0;var Oe=n(154),je=n.n(Oe),Ee=n(153),Ie=n.n(Ee);function Ce(e){var t=e.shapeUpdate;function n(){t()}return c.a.createElement("div",null,c.a.createElement(g.a,{size:"large",variant:"outlined",startIcon:c.a.createElement(Ie.a,null),onClick:function(){ke.getInstance().Save(),n()}},"Save"),c.a.createElement(g.a,{size:"large",variant:"outlined",startIcon:c.a.createElement(je.a,null),onClick:function(){ke.getInstance().Load(),n()}},"Load"))}var De=function(){function e(t){Object(d.a)(this,e),this._shapeInstance=f.getInstance(),this._shape=void 0,this._shape=t}return Object(p.a)(e,[{key:"execute",value:function(){return this._shapeInstance.add([this._shape]),!0}},{key:"undo",value:function(){this._shapeInstance.remove(this._shape.getObjectData().id)}}]),e}(),Se=n(30);var Ae=n(30),Pe=function(e){Object(P.a)(n,e);var t=Object(U.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._svgCanvas=c.a.createRef(),e._commandInstance=_.getInstance(),e._update=e.props.shapeUpdate,e.addShape=function(t){Ae.select("#contextMenu").style("display","none");var n=e._svgCanvas.current.getBoundingClientRect();e._commandInstance.push(new De(new fe(Q.type,t.clientX-n.left,t.clientY-n.top,Q.width,Q.height,Q.styling))),e._update()},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){!function(e,t){var n=Object(r.findDOMNode)(e),a={x:0,y:0};Se.drag().on("start",(function(){Se.selectAll(".selected").classed("selected",!1),Se.selectAll(".resizePoint").remove(),a={x:Se.event.x,y:Se.event.y},Se.select(this).append("rect").attr("id","selectionField").attr("class","selection").attr("x",a.x).attr("y",a.y).attr("width",0).attr("height",0)})).on("drag",(function(){var e=Se.event.x-a.x,t=Se.event.y-a.y;Se.select("#selectionField").attr("x",e<0?a.x+e:a.x).attr("y",t<0?a.y+t:a.y).attr("width",Math.abs(e)).attr("height",Math.abs(t)),Se.selectAll("#canvas > rect, #canvas > ellipse, #canvas > polygon, #canvas > g").each((function(){var e=Se.select(this);if(e.node()!==Se.select("#selectionField").node()){var t=e.node().getBBox(),n=new z(t.x+t.width/2,t.y+t.height/2),a=Se.select("#selectionField").node().getBBox();n.x>a.x&&n.x<a.x+a.width&&n.y>a.y&&n.y<a.y+a.height?e.classed("selected",!0):e.classed("selected",!1)}}))})).on("end",(function(){Se.select("#selectionField").remove(),1===T()&&q(t)}))(Se.select(n))}(this,this._update)}},{key:"render",value:function(){return c.a.createElement("svg",{id:"canvas",className:"fullSize",ref:this._svgCanvas,onClick:this.addShape},this.props.children)}}]),n}(c.a.Component),Ue=n(393),ze=n(394),Be=n(387),Ge=n(388),Te=n(155),Me=n.n(Te),Re=n(156),Ne=n.n(Re),Ve=n(157),qe=n.n(Ve),Fe=function(){function e(t){Object(d.a)(this,e),this._itemInstance=f.getInstance(),this._uuid=null,this._selection=void 0,this._selection=t}return Object(p.a)(e,[{key:"execute",value:function(){var e=new xe(this._selection);return this._uuid=e.getObjectData().id,this._itemInstance.add([e]),!0}},{key:"undo",value:function(){this._itemInstance.get(this._uuid).remove()}}]),e}(),Le=function(){function e(t){Object(d.a)(this,e),this._itemInstance=f.getInstance(),this._selection=void 0,this._deletedItems=[],this._selection=t}return Object(p.a)(e,[{key:"execute",value:function(){var e=this;return this._selection.forEach((function(t){e._deletedItems=e._deletedItems.concat(e._itemInstance.remove(t))})),!0}},{key:"undo",value:function(){this._itemInstance.add(this._deletedItems),this._deletedItems.length=0}}]),e}(),Je=n(30),He=function(){function e(t){Object(d.a)(this,e),this._itemInstance=f.getInstance(),this._selection=void 0,this._removedGroups=[],this._selection=t}return Object(p.a)(e,[{key:"execute",value:function(){var e=this;return this._selection.forEach((function(t){if("g"===Je.select('[id="'.concat(t,'"]')).node().tagName){var n=e._itemInstance.get(t);e._removedGroups.push(n.getObjectData()),n.remove()}})),!0}},{key:"undo",value:function(){var e=this,t=[];this._removedGroups.forEach((function(n){t.length=0,n.items.forEach((function(e){t.push(e.getObjectData().id)})),e._itemInstance.add([new xe(t)])}))}}]),e}(),We=n(30);function Xe(e){var t=e.shapeUpdate,n=f.getInstance(),a=_.getInstance();function i(){We.select("#contextMenu").style("display","none"),t()}return c.a.createElement(h.a,{id:"contextMenu",style:{width:"250px"}},c.a.createElement(Ue.a,null,c.a.createElement(ze.a,{onClick:function(){a.push(new Fe(n.selectedItemsUuids)),i()}},c.a.createElement(Be.a,null,c.a.createElement(Me.a,{fontSize:"small"})),c.a.createElement(Ge.a,{variant:"inherit"},"Create group")),c.a.createElement(ze.a,{onClick:function(){a.push(new He(n.selectedItemsUuids)),i()}},c.a.createElement(Be.a,null,c.a.createElement(Ne.a,{fontSize:"small"})),c.a.createElement(Ge.a,{variant:"inherit"},"Remove group(s)")),c.a.createElement(ze.a,{onClick:function(){a.push(new Le(n.selectedItemsUuids)),i()}},c.a.createElement(Be.a,null,c.a.createElement(qe.a,{fontSize:"small"})),c.a.createElement(Ge.a,{variant:"inherit"},"Delete"))))}var Ye=Object(o.a)((function(e){return Object(u.a)({root:{flexGrow:1,padding:e.spacing(2),height:"100%"},paper:{height:50,width:125},control:{padding:e.spacing(1),height:"100%"},button:{height:50,width:50,background:"white"},test:{height:"100%"}})}));function Ke(){var e=f.getInstance(),t=Ye(),n=c.a.useState({items:e.itemArray}),i=Object(a.a)(n,2),r=i[0],s=i[1];function o(){s({items:e.itemArray})}return c.a.createElement(l.a,{className:t.root,container:!0,spacing:1},c.a.createElement(l.a,{item:!0},c.a.createElement(l.a,{className:t.test,container:!0,direction:"column"},c.a.createElement(h.a,{className:t.control,elevation:3},c.a.createElement(Ce,{shapeUpdate:o}),c.a.createElement(x,{shapeUpdate:o}),c.a.createElement($,null),c.a.createElement(te,null),c.a.createElement(oe,{shapeUpdate:o})))),c.a.createElement(l.a,{item:!0,xs:!0},c.a.createElement(h.a,{className:t.test,elevation:2},c.a.createElement(Pe,{shapeUpdate:o},r.items.map((function(e){return e.draw(!1,o)}))),c.a.createElement(Xe,{shapeUpdate:o}))))}s.a.render(c.a.createElement(Ke,null),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.5751a5d9.chunk.js.map